import{R as Y,j as e}from"./client-CyNNhpF1.js";import{r as c,R as ee,f as se}from"./longer_filter_data-bbWhwDTo.js";const te="fa4c21a5-0e15-4ace-b2eb-9b339e1f6b4b",ae="1.0.0",re=[],le="2024-01-01T00:00:00.000Z",ne="2024-01-01T00:00:00.000Z",oe={title:"Triple-Negative Breast Cancer (TNBC) Transcriptomics",abstract:"Whole transcriptome sequencing (RNA-Seq) of 500 TNBC core biopsies collected prior to neoadjuvant chemotherapy. Correlated with Pathological Complete Response (pCR) rates.",dataCustodian:{identifier:"https://ror.org/custodian-3",name:"BREAST-PREDICT Consortium",contactPoint:"access@custodian-3.org"},funders:`CRUK
NIHR`,grantNumbers:"GRANT-3-2024",populationSize:3880,keywords:["Triple-Negative","Breast","Cancer","(TNBC)","Transcriptomics"],doiName:"10.1000/data.3",contactPoint:"access@custodian-3.org"},ie={description:"Whole transcriptome sequencing (RNA-Seq) of 500 TNBC core biopsies collected prior to neoadjuvant chemotherapy. Correlated with Pathological Complete Response (pCR) rates. This is a dummy description generated for testing purposes.",inPipeline:"Available"},ce={spatial:"United Kingdom",followUp:"1 - 10 Years"},de={origin:{purpose:["Study"],datasetType:["Health and disease"]},temporal:{publishingFrequency:"Annual",startDate:"2020-01-01",timeLag:"1-2 months"}},me={usage:{dataUseLimitation:["General research use"]},access:{accessRights:"Open access upon request.",jurisdiction:["GB-ENG"]},formatAndStandards:{vocabularyEncodingScheme:["ICD10"],conformsTo:["OMOP"],language:["en"],format:["text/csv"]}},ue=[{observedNode:"Persons",measuredValue:928,observationDate:"2023-12-31",measuredProperty:"Count"}],be={age:[{bin:"50-54 years",count:10},{bin:"55-59 years",count:20}],ethnicity:[{bin:"White - British",count:25},{bin:"Not stated",count:5}]},he=["0_0_0_9","0_0_1_8_0","0_2_3_4","0_2_3_5","0_1_3","0_0_2_15","0_0_4_2"],xe={identifier:te,version:ae,revisions:re,issued:le,modified:ne,summary:oe,documentation:ie,coverage:ce,provenance:de,accessibility:me,observations:ue,demographicFrequency:be,datasetFilters:he},ge=""+new URL("animal-BQxPT983.webp",import.meta.url).href,pe=""+new URL("background-Dic6nF5z.webp",import.meta.url).href,fe=""+new URL("biobank-BMdSmGS0.webp",import.meta.url).href,ye=""+new URL("invitro-CzdX-SR4.webp",import.meta.url).href,je=""+new URL("longitudinal-CZvSMLdK.webp",import.meta.url).href,we=""+new URL("treatments-B8LMVqaf.webp",import.meta.url).href,ve=""+new URL("omics-DcGfbBtp.webp",import.meta.url).href,F=""+new URL("medical_imaging-Bc1b0DyA.webp",import.meta.url).href,Ne=""+new URL("lab_results-BBwDjD0o.webp",import.meta.url).href,ke=""+new URL("erd-BKeEdrBw.png",import.meta.url).href,W={"Model Organisms":{src:ge,label:"Model Organisms"},Background:{src:pe,label:"Background"},"Biobank Samples":{src:fe,label:"Biobank Samples"},"In Vitro Studies":{src:ye,label:"In Vitro Studies"},"Longitudinal Follow up":{src:je,label:"Longitudinal"},Treatments:{src:we,label:"Treatments"},"Multi-omic Data":{src:ve,label:"Multi-omic Data"},"Imaging types":{src:F,label:"Imaging Data"},"Imaging Data":{src:F,label:"Imaging Data"},"Biopsy Results and Lab Reports":{src:Ne,label:"Lab Results"}},q=(s,r=[])=>{let o={};return!s||typeof s!="object"||Object.values(s).forEach(b=>{const g=[...r,b.label],N=g.join(" > ");o[b.id]={label:b.label,fullPath:N,rawPath:g},b.children&&Object.assign(o,q(b.children,g))}),o},Ce=s=>s.startsWith("0_0_2")?{group:"Cancer Filters",category:"CRUK Cancer Terms",showPath:!1}:s.startsWith("0_0_4")?{group:"Cancer Filters",category:"TCGA Terms",showPath:!1}:s.startsWith("0_0_0")?{group:"Cancer Filters",category:"ICD-O Topography",showPath:!0,slice:2}:s.startsWith("0_0_1")?{group:"Cancer Filters",category:"ICD-O Histology",showPath:!0,slice:2}:s.startsWith("0_0")?{group:"Cancer Filters",category:"Other Cancer Types",showPath:!0,slice:1}:s.startsWith("0_2")?{group:"Data Filters",category:"Data Types",showPath:!0,slice:1}:s.startsWith("0_1")?{group:"Access Filters",category:"Access Types",showPath:!1}:{group:"Other Filters",category:"Miscellaneous",showPath:!0,slice:0},Re=s=>{if(!s)return"";const r=s.match(/^.*?[.!?](?:\s|$)(?:.*?[.!?](?:\s|$))?/);return r?r[0]:s},Le=s=>s?Array.isArray(s)?s:s.split(";,;").map(r=>r.trim()):[],j=({label:s,value:r,colorClass:o})=>e.jsxs("div",{className:`p-4 rounded-lg shadow-sm border border-gray-100 flex flex-col items-center justify-center text-center ${o}`,children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:s}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 break-words w-full",children:r})]}),v=({id:s,title:r,children:o})=>e.jsxs("div",{className:"flex justify-between items-end mt-10 mb-4 pb-2 border-b border-gray-200",children:[e.jsx("h2",{id:s,className:"text-2xl font-bold text-gray-800",children:r}),o]}),x=({label:s,value:r,isLink:o})=>r?e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1",children:s}),o?e.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600 underline break-words block",children:r}):e.jsx("p",{className:"text-sm text-gray-700 leading-snug break-words",children:r})]}):null,Ae=()=>{const s=xe,[r,o]=c.useState({}),[b,g]=c.useState(!1),[N,z]=c.useState(288),k=c.useRef(!1),C=s.documentation?.description||s.summary?.description||"",$=c.useMemo(()=>Re(C),[C]),G=c.useMemo(()=>Le(s.summary.keywords),[s]),R=c.useMemo(()=>(s.structuralMetadata?.tables||s.structuralMetadata||[]).reduce((a,n)=>{const l=n.name,u=n.description||"";return a[l]||(a[l]={description:u,columns:[]}),n.columns&&a[l].columns.push(...n.columns),a},{}),[s]),S=s.summary.populationSize,T=s.coverage.typicalAgeRangeMin&&s.coverage.typicalAgeRangeMax?`${s.coverage.typicalAgeRangeMin} - ${s.coverage.typicalAgeRangeMax}`:s.coverage.typicalAgeRange,L=s.accessibility.access.deliveryLeadTime,_=s.coverage.followUp,A=s.accessibility.formatAndStandards?.format?s.accessibility.formatAndStandards.format.map(t=>t.split("/")[1]||t).join(", "):"Various",M=c.useMemo(()=>q(se),[]),{derivedFilters:P,activeIcons:I}=c.useMemo(()=>{const t={},a=new Set,n=Object.keys(W);(s.datasetFilters||[]).forEach(m=>{const p=M[m];if(p){const i=Ce(m);let y=null;if(i.showPath){const f=[...p.rawPath];f.length>i.slice?y=f.slice(i.slice).join(" > "):y=f.join(" > ")}t[i.group]||(t[i.group]={}),t[i.group][i.category]||(t[i.group][i.category]=[]),t[i.group][i.category].push({label:p.label,path:y}),m.startsWith("0_2")&&p.rawPath.forEach(f=>{n.includes(f)&&a.add(f)})}}),Object.keys(t).forEach(m=>{Object.keys(t[m]).forEach(p=>{t[m][p].sort((i,y)=>i.label.localeCompare(y.label))})});const u=Array.from(a).map(m=>W[m]);return{derivedFilters:t,activeIcons:u}},[s,M]),V=c.useCallback(()=>{k.current=!0,document.addEventListener("mousemove",E),document.addEventListener("mouseup",U),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),U=c.useCallback(()=>{k.current=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",U),document.body.style.cursor="default",document.body.style.userSelect="auto"},[]),E=c.useCallback(t=>{if(k.current){const a=Math.max(200,Math.min(t.clientX,600));z(a)}},[]),K=()=>{const t=JSON.stringify(s,null,2),a=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download="mammogram_metadata.json",document.body.appendChild(l),l.click(),document.body.removeChild(l)},H=t=>{o(a=>({...a,[t]:!a[t]}))},O=t=>{const a={};Object.keys(R).forEach(n=>{a[n]=t}),o(a)},D=t=>{console.log(`User selected: ${t}`),g(!1)},{summary:h,accessibility:B,observations:J}=s,w=B.access||{},d=B.usage||{},Z=Array.isArray(d.resourceCreator)?d.resourceCreator.join(", "):d.resourceCreator?.name||d.resourceCreator||"N/A",X=Array.isArray(d.dataUseLimitation)?d.dataUseLimitation.join(", "):d.dataUseLimitation,Q=Array.isArray(d.dataUseRequirements)?d.dataUseRequirements.join(", "):d.dataUseRequirement;return e.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-50 font-sans text-gray-800",children:[e.jsxs("nav",{style:{"--sidebar-width":`${N}px`},className:"w-full md:w-[var(--sidebar-width)] bg-white shadow-md flex-shrink-0 p-6 md:h-screen md:sticky md:top-0 overflow-y-auto flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-6 border-b pb-2",children:"Overview"}),e.jsx("ul",{className:"space-y-3 mb-8",children:["Summary","Documentation","Structural Metadata","Entity Relationship Diagrams","Observations"].map(t=>e.jsx("li",{children:e.jsx("a",{href:`#${t.toLowerCase().replace(/\s+/g,"-")}`,className:"block text-gray-600 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded transition-colors",children:t})},t))}),e.jsxs("div",{className:"mt-auto bg-blue-50 rounded-lg border border-blue-100 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-blue-200 pb-2 relative",children:[e.jsx("h4",{className:"font-bold text-blue-900",children:"Data Access"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>g(!b),className:"text-blue-600 hover:text-blue-800 transition-colors p-1 rounded hover:bg-blue-100",title:"Contact Options",children:e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),b&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-md shadow-xl border border-gray-200 z-50 overflow-hidden text-left",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>D("General Enquiry"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:"Make a general enquiry"}),e.jsx("button",{onClick:()=>D("Feasibility Enquiry"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700",children:"Make a feasibility enquiry"}),e.jsx("button",{onClick:()=>D("Data Access Request"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 font-semibold",children:"Start a data access request"})]})})]})]}),e.jsx(x,{label:"Data Controller",value:w.dataController}),e.jsx(x,{label:"Data Processor",value:w.dataProcessor}),e.jsx(x,{label:"Access Rights",value:w.accessRights,isLink:!0}),e.jsx(x,{label:"Delivery Lead Time",value:L}),e.jsx(x,{label:"Data Use Requirement",value:Q}),e.jsx(x,{label:"Data Use Limitation",value:X}),e.jsx(x,{label:"Request Cost",value:w.accessRequestCost||"Information not available"})]})]}),e.jsx("div",{className:"hidden md:block w-1 cursor-col-resize bg-gray-200 hover:bg-blue-400 hover:w-1.5 transition-all z-20 flex-shrink-0 active:bg-blue-600",onMouseDown:V}),e.jsxs("main",{className:"flex-1 p-8 max-w-5xl mx-auto relative min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-extrabold text-blue-900 mb-3",children:h.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center text-sm text-gray-600 gap-2 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold mr-2",children:"Publisher:"}),h.dataCustodian?.name||h.publisher?.name||"Unknown"]}),h.funding&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold mr-2",children:"Funded By:"}),e.jsx("span",{children:h.funding.name}),h.funding["grant number"]&&e.jsx("span",{className:"bg-gray-100 text-gray-500 text-xs px-2 py-0.5 rounded ml-2",children:h.funding["grant number"]})]})]})]}),e.jsxs("button",{onClick:K,className:"flex-shrink-0 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-4 py-2 rounded shadow transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download JSON"]})]}),e.jsx("div",{className:"flex flex-wrap gap-6 mb-10 justify-center md:justify-start",children:I.length>0?I.map((t,a)=>e.jsxs("div",{className:"group relative w-20 h-20 bg-white rounded-xl shadow-md flex items-center justify-center border border-gray-100 hover:border-blue-300 transition-all cursor-help",children:[e.jsx("img",{src:t.src,alt:t.label,className:"w-12 h-12 object-contain opacity-80 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block whitespace-nowrap bg-gray-800 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:t.label})]},a)):e.jsx("div",{className:"text-gray-400 italic text-sm",children:"No specific data type icons found."})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-10",children:[S&&e.jsx(j,{label:"Population",value:S.toLocaleString(),colorClass:"bg-blue-50"}),T&&e.jsx(j,{label:"Age Range",value:T,colorClass:"bg-green-50"}),L&&e.jsx(j,{label:"Access",value:L,colorClass:"bg-purple-50"}),_&&e.jsx(j,{label:"Follow Up",value:_,colorClass:"bg-yellow-50"}),A&&A!=="Various"&&e.jsx(j,{label:"Formats",value:A,colorClass:"bg-red-50"})]}),e.jsx(v,{id:"summary",title:"Summary"}),e.jsxs("div",{className:"prose max-w-none text-gray-700 mb-8 bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[e.jsx("p",{children:h.abstract}),s.enrichmentAndLinkage?.syntheticDataWebLink&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"font-semibold",children:"Associated Website: "}),Array.isArray(s.enrichmentAndLinkage.syntheticDataWebLink)?s.enrichmentAndLinkage.syntheticDataWebLink.map((t,a)=>e.jsx("a",{href:t,className:"text-blue-600 underline block",children:t},a)):e.jsx("a",{href:s.enrichmentAndLinkage.syntheticDataWebLink,className:"text-blue-600 underline",children:s.enrichmentAndLinkage.syntheticDataWebLink})]})]}),e.jsx(v,{id:"documentation",title:"Documentation"}),e.jsxs("details",{className:"group bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden",children:[e.jsxs("summary",{className:"cursor-pointer p-6 bg-blue-50 hover:bg-blue-100 transition flex justify-between items-center list-none",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-blue-900 mb-2",children:"Detailed Description"}),e.jsxs("p",{className:"text-gray-700 italic",children:[$,e.jsx("span",{className:"text-blue-600 ml-2 font-semibold not-italic text-sm",children:"(Click to expand)"})]})]}),e.jsx("span",{className:"transform group-open:rotate-180 transition-transform duration-200 text-blue-500",children:"▼"})]}),e.jsx("div",{className:"p-6 text-gray-700 leading-relaxed border-t border-gray-200 whitespace-pre-wrap",children:C})]}),e.jsx(v,{id:"structural-metadata",title:"Structural Metadata",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>O(!0),className:"text-xs text-blue-600 hover:text-blue-800 font-medium underline",children:"Expand All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:()=>O(!1),className:"text-xs text-blue-600 hover:text-blue-800 font-medium underline",children:"Collapse All"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-8",children:Object.keys(R).length===0?e.jsx("p",{className:"p-4 text-gray-500",children:"No structural metadata available."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600 text-sm uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b",children:"Entity / Description"}),e.jsx("th",{className:"p-3 border-b",children:"Column Name"}),e.jsx("th",{className:"p-3 border-b",children:"Type"}),e.jsx("th",{className:"p-3 border-b",children:"Description"})]})}),e.jsx("tbody",{className:"text-sm",children:Object.entries(R).map(([t,a])=>{const n=r[t];return e.jsxs(ee.Fragment,{children:[e.jsx("tr",{className:"bg-blue-50 border-b border-blue-100 cursor-pointer hover:bg-blue-100 transition-colors",onClick:()=>H(t),children:e.jsx("td",{colSpan:"4",className:"p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`transform transition-transform mr-2 text-blue-500 ${n?"rotate-90":""}`,children:"▶"}),e.jsx("span",{className:"font-bold text-blue-900 text-lg",children:t}),e.jsx("span",{className:"ml-4 text-gray-600 text-sm italic truncate max-w-md",children:a.description}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 font-medium",children:[a.columns.length," columns"]})]})})}),n&&a.columns.map((l,u)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b last:border-0 bg-white",children:[e.jsx("td",{className:"p-3 w-1/5 border-r border-gray-50"}),e.jsx("td",{className:"p-3 font-mono text-gray-700 w-1/4 font-semibold",children:l.name}),e.jsx("td",{className:"p-3 text-gray-500 w-1/6",children:l.dataType}),e.jsx("td",{className:"p-3 text-gray-600",children:l.description})]},`${t}-${l.name}-${u}`))]},t)})})]})})}),e.jsx("div",{className:"flex items-center justify-between mt-10 mb-4 border-b pb-2",children:e.jsx("h2",{id:"entity-relationship-diagrams",className:"text-2xl font-bold text-gray-800",children:"Entity Relationship Diagrams"})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8 p-4 overflow-x-auto",children:e.jsx("img",{src:ke,alt:"Entity Relationship Diagram",className:"min-w-full md:w-full h-auto object-contain"})}),e.jsx(v,{id:"observations",title:"Observations"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-10",children:J.map((t,a)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:t.measuredValue.toLocaleString()}),e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:t.observedNode}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:t.measuredProperty})]},a))})]}),e.jsxs("aside",{className:"w-full md:w-80 bg-white shadow-lg p-6 border-l border-gray-100 md:h-screen md:sticky md:top-0 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 uppercase tracking-wide",children:"Filters & Tags"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2 border-b border-gray-100 pb-1",children:"Keywords"}),e.jsx("ul",{className:"space-y-1",children:G.map((t,a)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mr-2"}),t]},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-2 border-b border-gray-200 pb-1 text-base",children:"Resource Creator"}),e.jsx("p",{className:"text-sm text-gray-600",children:Z})]}),Object.entries(P).map(([t,a])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-3 border-b border-gray-200 pb-1 text-base",children:t}),Object.entries(a).map(([n,l])=>e.jsxs("div",{className:"mb-4 pl-1",children:[e.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:n}),e.jsx("ul",{className:"pl-2 border-l-2 border-gray-100 ml-1",children:l.map((u,m)=>e.jsxs("li",{className:"mb-2 text-sm",children:[e.jsx("span",{className:"text-gray-800 font-medium block",children:u.label}),u.path&&e.jsx("span",{className:"text-xs text-gray-500 block break-words mt-0.5",children:u.path})]},m))})]},n))]},t)),Object.keys(P).length===0&&e.jsx("p",{className:"text-sm text-gray-400 italic",children:"No dataset filters applied."})]})]})]})},De=Y.createRoot(document.getElementById("meta"));De.render(e.jsx(Ae,{}));
