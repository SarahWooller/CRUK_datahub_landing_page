import{j as e}from"./client-BbprRhkc.js";import{r as d}from"./longer_filter_data-CDFXIz1i.js";const $=({data:t,onCopy:a,onDismiss:n})=>t?e.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black bg-opacity-60 p-4 pointer-events-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full border border-gray-300 relative",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-6 text-4xl text-gray-400 hover:text-red-600 transition-colors leading-none",children:"Ã—"}),e.jsx("h2",{className:"text-2xl font-bold text-red-700 mb-4 pr-8",children:"Email Client Not Found"}),e.jsx("p",{className:"text-lg text-gray-700 mb-6 leading-relaxed",children:"Unable to open your email app. If you would like to copy the following text to clipboard and manually email to **skw24@sussex.ac.uk** please click here."}),e.jsx("textarea",{readOnly:!0,className:"w-full h-48 p-4 border border-gray-200 rounded-lg bg-gray-50 text-base mb-6 font-mono",value:t}),e.jsx("button",{onClick:()=>a(t),className:"w-full py-5 bg-indigo-700 text-white font-bold rounded-lg text-lg hover:bg-indigo-800 transition-all shadow-lg",children:"Copy to Clipboard & Close"})]})}):null,T=t=>{const[a,n]=d.useState({}),[k,u]=d.useState(!1),[w,b]=d.useState(null);return{allFeedback:a,isFeedbackOpen:k,setIsFeedbackOpen:u,fallbackData:w,setFallbackData:b,handleSaveDraft:(s,r)=>{n(i=>({...i,[s]:r}))},handleFinalSubmit:(s,r,i="skw24@sussex.ac.uk")=>{const j={...a,[s]:r},p=Object.entries(j).filter(([c,o])=>o&&Object.values(o).some(l=>l!==""&&l!==null));if(p.length===0){alert("No feedback recorded yet");return}const x=p.map(([c,o])=>{const l=t[c]||t.default,D=l?.sectionTitle||c.toUpperCase(),F=Object.entries(o).map(([g,v])=>{const h=l?.questions?.find(C=>C.id===g);return`${h?h.label:g}: ${v}`}).join("%0D%0A");return`SECTION: ${D}%0D%0A${F}`}).join("%0D%0A%0D%0A-----------------%0D%0A%0D%0A"),y=x.replace(/%0D%0A/g,`
`);let f=!1;const m=()=>{f=!0};window.addEventListener("blur",m),window.location.href=`mailto:${i}?subject=CRUK Datahub Feedback&body=${x}`,setTimeout(()=>{window.removeEventListener("blur",m),f||b(y)},1e3),n({}),u(!1)}}};export{$ as F,T as u};
